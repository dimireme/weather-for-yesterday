---
alwaysApply: true
---

1. Общие принципы

Проект на Next.js (App Router, TypeScript)

Использовать минималистичную архитектуру

Добавлять функционал строго пошагово, без задела «на будущее»

Любое изменение должно:

либо добавлять конкретный функционал

либо упрощать код

Не усложнять без явной причины

2. Стек и ограничения

Разрешённый стек:

Next.js (app router)

TypeScript

Ant Design (antd)

TailwindCSS

fetch (без axios)

встроенные возможности Next.js (Metadata API, API routes)

Запрещено:

Zustand / Redux / MobX (пока не нужно)

Лишние CSS-файлы (использовать Tailwind + antd)

Кастомные CSS-стили без необходимости

Дублирование логики

3. Архитектура проекта
   Страницы:

/ — главная страница

View 1: ввод адреса (город / строка поиска)

View 2: использование текущей геолокации

/about

/privacy

API routes:

GET /api/geocode
→ поиск локации по строке

GET /api/weather
→ получение погоды по координатам
→ использует api.weatherapi.com/v1/history.json

Структура:

app router

единый layout.tsx

переиспользуемые компоненты в components/

бизнес-логика не должна быть в UI-компонентах

4. Работа с API

Внешний API (weatherapi.com) вызывается только из server-side API routes

API ключ хранится только в env

Клиент никогда не обращается напрямую к weatherapi.com

Все ошибки должны быть:

обработаны

возвращены в понятном формате

5. UI / UX правила

Использовать antd компоненты как основу

Tailwind — только для layout и простых отступов

Светлая / тёмная тема:

через antd ConfigProvider

состояние хранить локально (localStorage)

Celsius / Fahrenheit:

единый флаг состояния

используется во всех запросах и UI

6. Состояние и хранение данных

Глобального стейта нет

Использовать:

React state

localStorage (тема, единицы измерения)

Геолокация:

запрашивать только по действию пользователя

показывать ошибку при отказе

7. Код-стайл

Явная типизация

Маленькие функции

Один файл — одна ответственность

Без магических чисел и строк

Комментарии — только если логика неочевидна

8. Формат ответов Cursor

При любом запросе:

Кратко объяснить, что будет сделано

Показать структуру файлов, если меняется

Дать готовый код

Сказать, что делать следующим шагом
